(function(e){var m=window.document,s=/(\s*)([a-z]*)(\(\))?([.#$\s].*)?/i,t=/([.#$])([a-z\-_]+)/ig,u=/(^|[^\\])\{(.*?[^\\])\}/;e.extend({tmpl:function(h,f){e.isArray(h)||(h=[]);f=f||{};var j=e(),g,a,n,p,b,k=0,q,c,d,l,r={},v=function(a,b,c){a=f[c]||"";e.isFunction(a)&&(a=a.call(f));return b+a};for(q in h)if(b=s.exec(h[q]),c=b[2],d=b[4],c||d){if(b[3])try{a=f[c].call(f),a instanceof e&&(n=a,a=a[0])}catch(w){a=m.createElement("div")}else a=m.createElement(c||"div");if((b=(b[1].length+1)/4|0)&&g){for(b>
k&&(g=p);b<k--;)g=g.parentNode;g.appendChild(a)}else j.push(g=a);k=b;p=a;if(d){b=d.indexOf(" ");-1!=b&&(c=d.substr(b+1),d=d.substr(0,b),a["value"in a?"value":"innerHTML"]=c.replace(u,v));for(l=[""];null!==(b=t.exec(d));)switch(c=b[2],b[1]){case ".":l.push(c);break;case "#":a.id=c;break;case "$":r[c]=n||e(a)}a.className+=l.join(" ")}}j.c=j.cache=r;return j}})})(jQuery);