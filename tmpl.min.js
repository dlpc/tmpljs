(function(f){var m=window.document,s=/(\s*)([a-z]*)(\(\))?([.#$\s].*)?/i,t=/([.#$])([a-z\-_]+)/ig,u=/(?:^|[^\\])\{(.*?[^\\])\}/;f.extend({tmpl:function(h,g){f.isArray(h)||(h=[]);g=g||{};var j=f(),e,a,n,p,b,k=0,q,c,d,l,r={},v=function(b,a){return g[a]||""};for(q in h)if(b=s.exec(h[q]),c=b[2],d=b[4],c||d){if(b[3])try{a=g[c].call(g),a instanceof f&&(n=a,a=a[0])}catch(w){a=m.createElement("div")}else a=m.createElement(c||"div");if((b=(b[1].length+1)/4|0)&&e){for(b>k&&(e=p);b<k--;)e=e.parentNode;e.appendChild(a)}else j.push(e=
a);k=b;p=a;if(d){b=d.indexOf(" ");-1!==b&&(c=d.substr(b+1),d=d.substr(0,b),a.innerHTML=c.replace(u,v));for(l=[""];null!==(b=t.exec(d));)switch(c=b[2],b[1]){case ".":l.push(c);break;case "#":a.id=c;break;case "$":r[c]=n||f(a)}a.className+=l.join(" ")}}j.c=j.cache=r;return j}})})(jQuery);