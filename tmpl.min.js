/*! tmpl.js 0.9.0 */
!function(a){"use strict";var b,c,d,e,f,g=/^(\s*)(([\w.-]*)\((.*)\)|[\w-]*)(.*)$/,h=/\[([\w-]+)=?([^\]]*)\]/g,i=/([.#$])([\w-]+)/g,j=/\{(!?)([^\s|\}]*)\}/g,k=["input","textarea"],l=function(a,b){for(var c,d=a.split(".").reverse();c=d.pop();)b=b[c];return b},m=function(m,n,o){a.isArray(m)||(m=[]),n=n||{},o=o||n;for(var p=a(),q=0,r=m.length,s=0,t={},u=function(b,c,d){if(c)return"{"+d+"}";var e=l(d,n);return a.isFunction(e)&&(e=e.call(n)),e||0===e||(e=""),e};r>q;){var v=g.exec(m[q++]),w=v[2],x=v[3],y=v[5],z=!1,A=!1,B=[],C=(v[1].length+1)/4|0;if(w||y){if(x){if(z=l(x,o).apply(o,a.map(v[4].split(","),a.trim)),!z)continue;z instanceof a&&(A=z,z=z[0])}if(z&&1===z.nodeType||(z=document.createElement(w||"div")),C&&c){for(C>s&&(c=b);C<s--;)c=c.parentNode;c.appendChild(z)}else p.push(c=z);if(s=C,b=z,y){for(y=y.replace(h,function(a,b,c){return z.setAttribute(b,c||b),""}),d=y.indexOf(" "),-1!==d&&(e=y.substr(d+1).replace(j,u),y=y.substr(0,d),a.inArray(z.tagName.toLowerCase(),k)<0?z.innerHTML=e:z.value=e);v=i.exec(y);)switch(f=v[2],v[1]){case".":B.push(f);break;case"#":z.id=f;break;case"$":t[f]=A||a(z)}z.className&&B.push(z.className),B.length&&(z.className=B.join(" "))}}}return p.c=p.cache=t,p};a.extend({tmpl:m})}(jQuery);